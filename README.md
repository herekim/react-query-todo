# êµ¬í˜„ í™”ë©´

https://user-images.githubusercontent.com/76519867/183237185-eb641dcc-2b60-494f-b584-532c6b81a2cf.mov

# êµ¬í˜„ ì‚¬í•­

## Assignment 1 - Login / SignUp

- /auth ê²½ë¡œì— ë¡œê·¸ì¸ / íšŒì›ê°€ì… ê¸°ëŠ¥ì„ ê°œë°œí•©ë‹ˆë‹¤
  - ë¡œê·¸ì¸, íšŒì›ê°€ì…ì„ ë³„ë„ì˜ ê²½ë¡œë¡œ ë¶„ë¦¬í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤
  - [x] ìµœì†Œí•œ ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ input, ì œì¶œ buttonì„ ê°–ë„ë¡ êµ¬ì„±í•´ì£¼ì„¸ìš”
- ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ì˜ ìœ íš¨ì„±ì„ í™•ì¸í•©ë‹ˆë‹¤
  - [x] ì´ë©”ì¼ ì¡°ê±´ : ìµœì†Œ @, . í¬í•¨
  - [x] ë¹„ë°€ë²ˆí˜¸ ì¡°ê±´ : 8ì ì´ìƒ ì…ë ¥
  - [x] ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ê°€ ëª¨ë‘ ì…ë ¥ë˜ì–´ ìˆê³ , ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ ì œì¶œ ë²„íŠ¼ì´ í™œì„±í™” ë˜ë„ë¡ í•´ì£¼ì„¸ìš”
- ë¡œê·¸ì¸ APIë¥¼ í˜¸ì¶œí•˜ê³ , ì˜¬ë°”ë¥¸ ì‘ë‹µì„ ë°›ì•˜ì„ ë•Œ ë£¨íŠ¸ ê²½ë¡œë¡œ ì´ë™ì‹œì¼œì£¼ì„¸ìš”
  - [x] ì‘ë‹µìœ¼ë¡œ ë°›ì€ í† í°ì€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•´ì£¼ì„¸ìš”
  - [x] ë‹¤ìŒ ë²ˆì— ë¡œê·¸ì¸ ì‹œ í† í°ì´ ì¡´ì¬í•œë‹¤ë©´ ë£¨íŠ¸ ê²½ë¡œë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œì¼œì£¼ì„¸ìš”
  - [x] ì–´ë–¤ ê²½ìš°ë“  í† í°ì´ ìœ íš¨í•˜ì§€ ì•Šë‹¤ë©´ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¬ê³  ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œì¼œì£¼ì„¸ìš”

## Assignment 2 - Todo List

- Todo List APIë¥¼ í˜¸ì¶œí•˜ì—¬ Todo List CRUD ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì£¼ì„¸ìš”
  - [x] ëª©ë¡ / ìƒì„¸ ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ì–´ êµ¬í˜„í•´ì£¼ì„¸ìš”
  - [x] Todo ëª©ë¡ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - [x] Todo ì¶”ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í•  ì¼ì´ ì¶”ê°€ ë©ë‹ˆë‹¤.
  - [x] Todo ìˆ˜ì • ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ìˆ˜ì • ëª¨ë“œë¥¼ í™œì„±í™”í•˜ê³ , ìˆ˜ì • ë‚´ìš©ì„ ì œì¶œí•˜ê±°ë‚˜ ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - [x] Todo ì‚­ì œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ Todoë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í•œ í™”ë©´ ë‚´ì—ì„œ Todo Listì™€ ê°œë³„ Todoì˜ ìƒì„¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì„¸ìš”.

  - [x] ìƒˆë¡œê³ ì¹¨ì„ í–ˆì„ ë•Œ í˜„ì¬ ìƒíƒœê°€ ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
  - [ ] ê°œë³„ Todoë¥¼ ì¡°íšŒ ìˆœì„œì— ë”°ë¼ í˜ì´ì§€ ë’¤ë¡œê°€ê¸°ë¥¼ í†µí•˜ì—¬ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì„¸ìš”.

- í•œ í˜ì´ì§€ ë‚´ì—ì„œ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ë°ì´í„°ê°€ ì •í•©ì„±ì„ ê°–ì¶”ë„ë¡ êµ¬í˜„í•´ì£¼ì„¸ìš”
  - [x] ìˆ˜ì •ë˜ëŠ” Todoì˜ ë‚´ìš©ì´ ëª©ë¡ì—ì„œë„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤

## ì‚¬ìš© ê¸°ìˆ 

Next.js, TypeScript, React Query, Recoil, Tailwind CSS, React Hook Form, MUI

## ì°¸ê³  ì‚¬í•­

- Redirectì˜ ê²½ìš° íŠ¹ì • í˜ì´ì§€(/todo)ì— ì ‘ê·¼ ì‹œ í† í°ì´ ì—†ìœ¼ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
- "ê°œë³„ Todoë¥¼ ì¡°íšŒ ìˆœì„œì— ë”°ë¼ í˜ì´ì§€ ë’¤ë¡œê°€ê¸°ë¥¼ í†µí•˜ì—¬ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì„¸ìš”."ì—ì„œ 'ì¡°íšŒ ìˆœì„œ'ì˜ ì˜ë¯¸ë¥¼ ì´í•´í•˜ì§€ ëª»í•´ êµ¬í˜„í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.

## ë°°ìš°ê³  ì‹¶ì€ ê²ƒ

- âœ… React Queryì—ì„œ ë°˜ë³µë˜ëŠ” ì½”ë“œ ì¤„ì´ê¸°
- React Queryì—ì„œ Response ë°ì´í„°ì˜ íƒ€ì´í•‘
- âœ… êµ¬ì¡°ì ì¸ ì—ëŸ¬ í•¸ë“¤ë§ ì²˜ë¦¬ ë°©ë²• (ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°œë³„ì ìœ¼ë¡œ í•˜ì§€ì•Šê¸°)

# 1ì°¨ ë¦¬íŒ©í† ë§

https://user-images.githubusercontent.com/76519867/184578404-fcc7f82c-2261-49c4-beda-acb932eec611.mov

## [ë¹„ë™ê¸° ì²˜ë¦¬ ìœ„ì„í•˜ê¸°](https://github.com/herekim/wanted-pre-onboarding-challenge-fe-1/commit/ada145791ea171edef19c081d60d817548c39329)

### ë°”ê¾¸ê³  ì‹¶ì—ˆë˜ ë¬¸ì œ

- ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ êµ¬ì¡°ì ìœ¼ë¡œ í•´ê²°í•˜ê³  ì‹¶ì—ˆë‹¤
- ê° ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì´ë¤„ì§€ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ì™¸ë¶€ë¡œ ìœ„ì„í•´ë³´ì

### ì£¼ìš” ì»¨ì…‰

- ë¡œë”© ì²˜ë¦¬ Suspenceì— ìœ„ì„í•˜ê¸°
- ì—ëŸ¬ ì²˜ë¦¬ ErrorBoundaryì— ìœ„ì„í•˜ê¸°
- React Queryì˜ QueryErrorResetBoundaryë¡œ reset ì²˜ë¦¬í•˜ê¸°

### ì£¼ìš” êµ¬í˜„

- ë¹„ë™ê¸° ì²˜ë¦¬ ìœ„ì„í•˜ê¸° ì „

  - ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë¡œë”©ê³¼ ì—ëŸ¬ì²˜ë¦¬ë¥¼ í•˜ê³ ìˆìŒ

    ```tsx
    // todo.tsx
    const { isRedirect } = useRedirect()

    const { data: todos, refetch } = useGetTodosQuery()
    const { mutate: deleteTodoMutate } = useDeleteTodoMutation()

    const [selectedTodo, setSelectedTodo] = useState('')

    const deleteTodo = (id: string) => {
      deleteTodoMutate(id, {
        onSuccess: () => {
          refetch()
        },
        onError: (err) => {
          // ì—ëŸ¬ í•¸ë“¤ë§
        },
      })
    }

    // ë¡œë”© í•¸ë“¤ë§
    if (!todos || isRedirect) return <Spinner />
    ```

- ë¹„ë™ê¸° ì²˜ë¦¬ í›„

  - todoContainer ì»´í¬ë„ŒíŠ¸ë¡œ ì¶”ìƒí™”
  - ë¡œë”©ê³¼ ì—ëŸ¬ ì²˜ë¦¬ëŠ” ì œê±°ë˜ì—ˆê³ , ì„±ê³µ ì‹œë§Œ ê³ ë ¤

    ```tsx
    // todoContainer.tsx
    useRedirect()

    const { data: todos, refetch } = useGetTodosQuery()
    const { mutate: deleteTodoMutate } = useDeleteTodoMutation()

    const [selectedTodo, setSelectedTodo] = useState('')

    const deleteTodo = (id: string) => {
      deleteTodoMutate(id, {
        // ì„±ê³µ ì‹œë§Œ ê´€ë¦¬
        onSuccess: () => refetch(),
      })
    }

    // ë¡œë”© í•¸ë“¤ë§ ì œê±°
    ```

- AsyncBoundaryë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„ì„

  - pendingFallbackìœ¼ë¡œ ë¡œë”© ì²˜ë¦¬
  - rejectedFallbackìœ¼ë¡œ ì—ëŸ¬ ì²˜ë¦¬

    ```tsx
    // todo.tsx
    // AsyncBoundaryë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•œë²ˆ ë” ì¶”ìƒí™”
    <CenterContainer>
      <AsyncBoundary
        // ë¡œë”© í•¸ë“¤ë§
        pendingFallback={<Spinner />}
        // ì—ëŸ¬ í•¸ë“¤ë§
        rejectedFallback={({ error, reset }) => <ErrorTodo error={error} reset={reset} />}
      >
        <TodoContainer />
      </AsyncBoundary>
    </CenterContainer>
    ```

- ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•˜ëŠ” AsyncBoundaryì˜ ë‚´ë¶€

  - ë¡œë”© ì²˜ë¦¬ëŠ” Suspense
  - ì—ëŸ¬ ì²˜ë¦¬ëŠ” ErrorBoundary
  - QueryErrorResetBoundaryë¡œ reset ì²˜ë¦¬

    ```tsx
    // asyncBoundary.tsx
    const AsyncBoundary = ({ pendingFallback, rejectedFallback, children }: Props) => {
      return (
        <QueryErrorResetBoundary>
          {({ reset }) => (
            <ErrorBoundary onReset={reset} fallbackComponent={rejectedFallback}>
              <Suspense fallback={pendingFallback}>{children}</Suspense>
            </ErrorBoundary>
          )}
        </QueryErrorResetBoundary>
      )
    }
    ```

### ì–»ì„ ìˆ˜ ìˆì—ˆë˜ ê²ƒ

- ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì´ë¤„ì§ˆ ë•Œ ì„±ê³µ ì‹œë§Œ ê³ ë ¤í•  ìˆ˜ ìˆë‹¤
- AsyncBoundaryì— ë¡œë”©ê³¼ ì—ëŸ¬ ì‹œ ë³´ì—¬ì¤˜ì•¼í•  ì»´í¬ë„ŒíŠ¸ë¥¼ ì£¼ì…í•´ì£¼ë©´ ì„ ì–¸ì ìœ¼ë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤
- ë¹„ë™ê¸° ì²˜ë¦¬ì— ëŒ€í•´ í˜‘ì—… ì‹œ ì»¨ë²¤ì…˜ì„ ë§Œë“¤ê¸° ì‰½ë‹¤

### ì¶”ê°€ë¡œ ê³ ë ¤í•  ìˆ˜ ìˆëŠ” ê²ƒ

- ë¡œë”© ì‹œ ë‹¨ìˆœíˆ Spinnerë¥¼ ë³´ì—¬ì£¼ê³  ìˆëŠ”ë°, ì´ë¥¼ ì»´í¬ë„ŒíŠ¸ì— ë”°ë¼ ìŠ¤ì¼ˆë ˆí†¤ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤
- ErrorBoundaryë¥¼ ì§ì ‘ êµ¬í˜„í–ˆëŠ”ë°, react-error-boundary ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜µì…˜ì„ ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆë‹¤

## [any ì—†ì• ê¸°](https://github.com/herekim/wanted-pre-onboarding-challenge-fe-1/commit/6992301a6b61b17144578f036b5516d69382d05d)

### useRef, event íƒ€ì… ì¶”ë¡ 

- refì™€ eventì—ì„œ any ì‚¬ìš©ì¤‘

```ts
// ref any
const useOutsideClick = (ref: any) => {
  const [clicked, setClicked] = useState(false)

  useEffect(() => {
    // event any
    const handleClick = (event: any) => {
      if (ref.current && !ref.current.contains(event.target)) {
        setClicked(true)
      }
    }

    document.addEventListener('mousedown', handleClick)
    return () => {
      document.removeEventListener('mousedown', handleClick)
    }
  }, [ref])

  return { clicked }
}
```

- íƒ€ì… ì¶”ë¡  í›„

```ts
-
const useOutsideClick = (ref: React.RefObject<HTMLElement>) => {
  const [clicked, setClicked] = useState(false)

  useEffect(() => {
    const handleClick = (event: Event) => {
      if (event.target instanceof HTMLElement) {
        if (ref.current && !ref.current.contains(event.target)) {
          setClicked(true)
        }
      }
    }

    document.addEventListener('mousedown', handleClick)
    return () => {
      document.removeEventListener('mousedown', handleClick)
    }
  }, [ref])

  return { clicked }
}
```

### ì°¸ê³ ìë£Œ

[Reactì—ì„œ ì„ ì–¸ì ìœ¼ë¡œ ë¹„ë™ê¸° ë‹¤ë£¨ê¸°](https://jbee.io/react/error-declarative-handling-1/)<br/>
[React ErrorBoundaryë¥¼ ì‚¬ìš©í•˜ì—¬ ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ í•˜ê¸° (with react-query)](https://velog.io/@suyeon9456/React-Query-Error-Boundary-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0#error-%EB%B0%9C%EC%83%9D-%ED%9B%84-%EC%BF%BC%EB%A6%AC-%EC%9E%AC%EC%8B%9C%EB%8F%84)

# 2ì°¨ ë¦¬íŒ©í† ë§

## React Query ë”ìš± ì˜ í™œìš©í•˜ê¸°

### Type Narrowing

- ê¸°ì¡´ ì½”ë“œ

  - isSuccessì™€ dataë¥¼ êµ¬ì¡°ë¶„í•´í• ë‹¹ìœ¼ë¡œ ê°€ì ¸ì™”ë‹¤
  - ì´ ê²½ìš° isSuccessë¡œ dataì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ íƒ€ì… ì²´í‚¹í•  ìˆ˜ ì—†ë‹¤

  ```tsx
  const { data: todos, refetch, isSuccess } = useGetTodosQuery()
  const { mutate: deleteTodoMutate } = useDeleteTodoMutation()

  const [selectedTodo, setSelectedTodo] = useState('')

  const deleteTodo = (id: string) => {
    deleteTodoMutate(id, {
      onSuccess: () => refetch(),
    })
  }

  useEffect(() => {
    refetch()
  }, [isModal.add, isModal.modify])

  // todosì˜ íƒ€ì…ì€ Todo[] | undefined ì´ë‹¤
  // íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì œëŒ€ë¡œ ì²´í¬í•˜ì§€ ëª»í•¨
  return <>{isSuccess && <TodoMain todos={todos} />}</>
  ```

- ìˆ˜ì •í•œ ì½”ë“œ

  - getTodosQueryë¥¼ í†µí•´ ì ‘ê·¼í•˜ë¯€ë¡œ ì •ìƒì ìœ¼ë¡œ íƒ€ì…ì²´í¬ê°€ ê°€ëŠ¥í•˜ë‹¤

  ```tsx
  const getTodosQuery = useGetTodosQuery()
  const deleteTodoMutation = useDeleteTodoMutation()

  const [selectedTodo, setSelectedTodo] = useState('')

  const deleteTodo = (id: string) => {
    deleteTodoMutation.mutate(id, {
      onSuccess: () => getTodosQuery.refetch(),
    })
  }

  useEffect(() => {
    getTodosQuery.refetch()
  }, [isModal.add, isModal.modify])

  return <>{getTodosQuery.isSuccess && <TodoMain todos={getTodosQuery.todos} />}</>
  ```

### Colocation

- ê¸°ì¡´ Query íŒŒì¼ ìœ„ì¹˜

  ğŸ“¦ service  
  â”£ ğŸ“œ api.ts  
  â”— ğŸ“œ query.ts

- ìˆ˜ì •í•œ Query íŒŒì¼ ìœ„ì¹˜  
   ğŸ“¦ auth  
   â”£ ğŸ“œ signin.query.tsx  
   â”£ ğŸ“œ signin.tsx  
   â”£ ğŸ“œ signup.query.tsx  
   â”— ğŸ“œ signup.tsx

- ì¥ì 

  - í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•„ìš”í•œ Query ê´€ë ¨ ì •ë³´ë¥¼ ì°¾ê¸° ì‰¬ì›€
  - êµ¬ì¡°ì ìœ¼ë¡œ Query íŒŒì¼ì´ ë¶„ë¦¬ ê°€ëŠ¥

- ë‹¨ì 

  - a.tsxì—ì„œ ì‚¬ìš©ë˜ëŠ” Queryê°€ b.tsxì—ì„œë„ í•„ìš”í•  ê²½ìš° ì²˜ë¦¬ ë°©ë²•ì„ ê³ ë ¤í•´ì•¼í•¨

    ğŸ“¦ A  
    â”£ ğŸ“œ a.query.tsx  
    â”£ ğŸ“œ a.tsx  
    ğŸ“¦ B  
    â”£ ğŸ“œ b.query.tsx  
    â”£ ğŸ“œ b.tsx

- ê²°ë¡ 
  - ì˜³ê³  ê·¸ë¦„ì˜ ë¬¸ì œëŠ” ì•„ë‹ˆê³  ì„ í˜¸ë„ì˜ ì°¨ì´ì¸ ê²ƒ ê°™ë‹¤
  - ê°œì¸ì ìœ¼ë¡œëŠ” Colocation ë°©ì‹ì— ì„ í˜¸ë„ê°€ ìˆë‹¤
  - ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤
    1. QueryëŠ” ê²°êµ­ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì¡´ì¬í•˜ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ì™€ ê°™ì€ ìœ„ì¹˜ì— ë†“ì•˜ì„ ë•Œ í•´ë‹¹ ì¿¼ë¦¬ ì •ë³´ë¥¼ ì°¾ê¸° ì‰½ê³ , í•´ë‹¹ ì¿¼ë¦¬ íŒŒì¼ì˜ ë‚´ìš©ì´ ì˜ˆìƒ ê°€ëŠ¥í•˜ë‹¤.
    2. ë‹¨ì ì—ì„œ ì–¸ê¸‰í•œ ì¬ì‚¬ìš© ë¬¸ì œë„ A, B í´ë”ì˜ ìƒìœ„ í´ë”ì— ì¿¼ë¦¬ íŒŒì¼ì„ ìœ„ì¹˜ì‹œí‚¤ëŠ” ë“±ì˜ ë°©ë²•ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥í•˜ë‹¤.

### Query Key Factories

- ê¸°ì¡´ ì½”ë“œ

  - ê°ê° ì¿¼ë¦¬ í‚¤ë¥¼ ì„¤ì •í•´ë‘ 

  ```tsx
  export const useGetTodoQuery = (id: string, { enabled }: { enabled?: boolean }) => {
    return useQuery(
      ['todo', id],
      async (): Promise<Todo> => await axios.get(`${API.TODOS}/${id}`).then((res) => res.data.data),
      { enabled },
    )
  }

  export const useGetTodosQuery = () => {
    return useQuery(
      ['todos'],
      async (): Promise<Todo[]> =>
        await axios.get(`${API.TODOS}`).then(async (res) => {
          return res.data.data
        }),
    )
  }
  ```

- ìˆ˜ì •í•œ ì½”ë“œ

  - todoKeys ê°ì²´ë¥¼ ë§Œë“¦
  - êµ¬ì¡°ì ìœ¼ë¡œ QueryKeyë¥¼ ê´€ë¦¬ ê°€ëŠ¥

  ```tsx
  export const useGetTodoQuery = (id: string, { enabled }: { enabled?: boolean }) => {
    return useQuery(
      todoKeys.todo(id),
      async (): Promise<Todo> => await axios.get(`${API.TODOS}/${id}`).then((res) => res.data.data),
      { enabled },
    )
  }

  export const useGetTodosQuery = () => {
    return useQuery(
      todoKeys.all,
      async (): Promise<Todo[]> =>
        await axios.get(`${API.TODOS}`).then(async (res) => {
          return res.data.data
        }),
    )
  }

  export const todoKeys = {
    all: ['todos'] as const,
    todo: (id: string) => ['todo', id] as const,
  }
  ```

  ### ë°ì´í„° ìµœì‹  ìƒíƒœë¡œ ë§Œë“¤ê¸°

  - ê¸°ì¡´ ì½”ë“œ

    - refetchë¥¼ í†µí•´ ë°ì´í„° ìµœì‹ í™”

    ```tsx
    const getTodosQuery = useGetTodosQuery()
    const deleteTodoMutation = useDeleteTodoMutation()

    const [selectedTodo, setSelectedTodo] = useState('')

    const deleteTodo = (id: string) => {
      deleteTodoMutation.mutate(id, {
        onSuccess: () => getTodosQuery.refetch(),
      })
    }

    useEffect(() => {
      if (!isModal.add || !isModal.modify) {
        getTodosQuery.refetch()
      }
    }, [isModal.add, isModal.modify])
    ```

  - ìˆ˜ì •í•œ ì½”ë“œ

    - queryClient.invalidateQueriesë¥¼ í†µí•´ í•´ë‹¹ ì¿¼ë¦¬í‚¤ ë°ì´í„° ìµœì‹ í™”

    ```tsx
    const queryClient = useQueryClient()

    const getTodosQuery = useGetTodosQuery()
    const deleteTodoMutation = useDeleteTodoMutation()

    const [selectedTodo, setSelectedTodo] = useState('')

    const deleteTodo = (id: string) => {
      deleteTodoMutation.mutate(id, {
        onSuccess: () => queryClient.invalidateQueries(todoKeys.all),
      })
    }

    useEffect(() => {
      if (!isModal.add || !isModal.modify) {
        queryClient.invalidateQueries(todoKeys.all)
      }
    }, [isModal.add, isModal.modify])
    ```

  - ì •ë¦¬
    - í˜„ì¬ ìƒí™©ì—ì„œëŠ” ìµœì‹ í™”ê°€ í•„ìš”í•œ getTodosQueryë¥¼ ê°™ì€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°€ì§€ê³  ì˜¤ê³  ìˆê¸° ë•Œë¬¸ì— refetchë„ ê´œì°®ì€ ì˜µì…˜
    - í•˜ì§€ë§Œ ìµœì‹ í™”ê°€ í•„ìš”í•œ ì¿¼ë¦¬ê°€ ê°™ì€ ì»´í¬ë„ŒíŠ¸ì— ì—†ëŠ” ìƒí™©ì´ë¼ë©´ invalidateQueriesì™€ ì¿¼ë¦¬í‚¤ë¡œ ìµœì‹ í™”í•´ì£¼ë©´ ë¨
